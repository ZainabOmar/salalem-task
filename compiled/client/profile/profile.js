'use strict';

angular.module('otbo5ly.profile', []).controller('ProfileController', function ($scope, $routeParams, $window, $location, Users, OrderService) {
	$scope.data = {};
	$scope.orders = {};

	$scope.getProfile = function () {
		Users.getCookerProfile($routeParams.user).then(function (data) {
			if (data.UserTypeName === 'cooker') {
				$scope.data = data;
			} else {
				$location.path('/');
			}
		});
	};

	$scope.getOrders = function () {
		Users.getCookerOrders($routeParams.user).then(function (data) {
			if (JSON.parse($window.localStorage.getItem('user.otbo5ly')).UserTypeName === "cooker") {
				$scope.orders = data;
			} else {
				$location.path('/');
			}
		});
	};

	$scope.setOrder = function (UserID, cookerID, cookNameID, FullName, cookName) {
		OrderService.setOrder({ userID: UserID, cookerID: cookerID,
			CookNamesID: cookNameID, FullName: FullName, cookName: cookName });
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2NsaWVudC9wcm9maWxlL3Byb2ZpbGUuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkcm91dGVQYXJhbXMiLCIkd2luZG93IiwiJGxvY2F0aW9uIiwiVXNlcnMiLCJPcmRlclNlcnZpY2UiLCJkYXRhIiwib3JkZXJzIiwiZ2V0UHJvZmlsZSIsImdldENvb2tlclByb2ZpbGUiLCJ1c2VyIiwidGhlbiIsIlVzZXJUeXBlTmFtZSIsInBhdGgiLCJnZXRPcmRlcnMiLCJnZXRDb29rZXJPcmRlcnMiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2V0T3JkZXIiLCJVc2VySUQiLCJjb29rZXJJRCIsImNvb2tOYW1lSUQiLCJGdWxsTmFtZSIsImNvb2tOYW1lIiwidXNlcklEIiwiQ29va05hbWVzSUQiXSwibWFwcGluZ3MiOiI7O0FBQUFBLFFBQVFDLE1BQVIsQ0FBZSxpQkFBZixFQUFrQyxFQUFsQyxFQUVDQyxVQUZELENBRVksbUJBRlosRUFFaUMsVUFBVUMsTUFBVixFQUFrQkMsWUFBbEIsRUFBZ0NDLE9BQWhDLEVBQXlDQyxTQUF6QyxFQUFvREMsS0FBcEQsRUFBMkRDLFlBQTNELEVBQXlFO0FBQ3hHTCxRQUFPTSxJQUFQLEdBQWMsRUFBZDtBQUNBTixRQUFPTyxNQUFQLEdBQWdCLEVBQWhCOztBQUVBUCxRQUFPUSxVQUFQLEdBQW9CLFlBQVU7QUFDL0JKLFFBQU1LLGdCQUFOLENBQXVCUixhQUFhUyxJQUFwQyxFQUEwQ0MsSUFBMUMsQ0FBK0MsVUFBU0wsSUFBVCxFQUFlO0FBQzdELE9BQUdBLEtBQUtNLFlBQUwsS0FBc0IsUUFBekIsRUFBa0M7QUFDakNaLFdBQU9NLElBQVAsR0FBY0EsSUFBZDtBQUNBLElBRkQsTUFFTztBQUNOSCxjQUFVVSxJQUFWLENBQWUsR0FBZjtBQUNBO0FBQ0QsR0FORDtBQU9FLEVBUkQ7O0FBVUFiLFFBQU9jLFNBQVAsR0FBbUIsWUFBVTtBQUM5QlYsUUFBTVcsZUFBTixDQUFzQmQsYUFBYVMsSUFBbkMsRUFBeUNDLElBQXpDLENBQThDLFVBQVNMLElBQVQsRUFBYztBQUMzRCxPQUFHVSxLQUFLQyxLQUFMLENBQVdmLFFBQVFnQixZQUFSLENBQXFCQyxPQUFyQixDQUE2QixjQUE3QixDQUFYLEVBQXlEUCxZQUF6RCxLQUEwRSxRQUE3RSxFQUFzRjtBQUNyRlosV0FBT08sTUFBUCxHQUFnQkQsSUFBaEI7QUFDQSxJQUZELE1BRU87QUFDTkgsY0FBVVUsSUFBVixDQUFlLEdBQWY7QUFDQTtBQUNELEdBTkQ7QUFPQyxFQVJBOztBQVVDYixRQUFPb0IsUUFBUCxHQUFrQixVQUFTQyxNQUFULEVBQWlCQyxRQUFqQixFQUEyQkMsVUFBM0IsRUFBdUNDLFFBQXZDLEVBQWlEQyxRQUFqRCxFQUEwRDtBQUM3RXBCLGVBQWFlLFFBQWIsQ0FBc0IsRUFBQ00sUUFBUUwsTUFBVCxFQUFpQkMsVUFBV0EsUUFBNUI7QUFDcEJLLGdCQUFhSixVQURPLEVBQ0tDLFVBQVdBLFFBRGhCLEVBQzBCQyxVQUFVQSxRQURwQyxFQUF0QjtBQUVBLEVBSEM7QUFLRixDQS9CRCIsImZpbGUiOiJwcm9maWxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ290Ym81bHkucHJvZmlsZScsIFtdKVxyXG5cclxuLmNvbnRyb2xsZXIoJ1Byb2ZpbGVDb250cm9sbGVyJywgZnVuY3Rpb24gKCRzY29wZSwgJHJvdXRlUGFyYW1zLCAkd2luZG93LCAkbG9jYXRpb24sIFVzZXJzLCBPcmRlclNlcnZpY2UpIHtcclxuICAkc2NvcGUuZGF0YSA9IHt9O1xyXG4gICRzY29wZS5vcmRlcnMgPSB7fTtcclxuXHJcbiAgJHNjb3BlLmdldFByb2ZpbGUgPSBmdW5jdGlvbigpe1xyXG5cdFVzZXJzLmdldENvb2tlclByb2ZpbGUoJHJvdXRlUGFyYW1zLnVzZXIpLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG5cdFx0aWYoZGF0YS5Vc2VyVHlwZU5hbWUgPT09ICdjb29rZXInKXtcclxuXHRcdFx0JHNjb3BlLmRhdGEgPSBkYXRhO1x0XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkbG9jYXRpb24ucGF0aCgnLycpO1xyXG5cdFx0fVxyXG5cdH0pOyAgXHRcclxuICB9XHJcblxyXG4gICRzY29wZS5nZXRPcmRlcnMgPSBmdW5jdGlvbigpe1xyXG5cdFVzZXJzLmdldENvb2tlck9yZGVycygkcm91dGVQYXJhbXMudXNlcikudGhlbihmdW5jdGlvbihkYXRhKXtcclxuXHRcdGlmKEpTT04ucGFyc2UoJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlci5vdGJvNWx5JykpLlVzZXJUeXBlTmFtZSA9PT0gXCJjb29rZXJcIil7XHJcblx0XHRcdCRzY29wZS5vcmRlcnMgPSBkYXRhO1x0XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkbG9jYXRpb24ucGF0aCgnLycpO1xyXG5cdFx0fVxyXG5cdH0pXHJcblx0fVxyXG5cclxuICBcdCRzY29wZS5zZXRPcmRlciA9IGZ1bmN0aW9uKFVzZXJJRCwgY29va2VySUQsIGNvb2tOYW1lSUQsIEZ1bGxOYW1lLCBjb29rTmFtZSl7XHJcblx0XHRPcmRlclNlcnZpY2Uuc2V0T3JkZXIoe3VzZXJJRDogVXNlcklELCBjb29rZXJJRCA6IGNvb2tlcklELFxyXG5cdFx0XHQgQ29va05hbWVzSUQ6IGNvb2tOYW1lSUQsIEZ1bGxOYW1lIDogRnVsbE5hbWUsIGNvb2tOYW1lOiBjb29rTmFtZX0pO1xyXG5cdH1cclxuXHJcbn0pOyJdfQ==