'use strict';

angular.module('otbo5ly.newOrder', []).controller('NewOrderController', function ($scope, $location, Users, Auth, OrderService) {

	$scope.order = {};

	if (!OrderService.getOrder().userID) {
		alert('you should choose what to order first!');
		$location.path('/');
	} else {
		Object.assign($scope.order, OrderService.getOrder());
		//console.log("order coming from main ---- ", $scope.order);
	}

	var getDeliveryDate = function getDeliveryDate() {
		var todayDate = new Date();
		todayDate.setDate(todayDate.getDate() + 1);
		return todayDate;
	};

	$scope.order.deliveryDate = getDeliveryDate().toISOString().slice(0, 10);

	$scope.addOrder = function () {
		Users.addNewOrder($scope.order).then(function (resp) {
			if (resp.status === 500) {
				alert('Something went wrong try again');
			} else {
				alert('your order has been sent successfully');
				$location.path('/');
			}
		});
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2NsaWVudC9vcmRlci9vcmRlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRsb2NhdGlvbiIsIlVzZXJzIiwiQXV0aCIsIk9yZGVyU2VydmljZSIsIm9yZGVyIiwiZ2V0T3JkZXIiLCJ1c2VySUQiLCJhbGVydCIsInBhdGgiLCJPYmplY3QiLCJhc3NpZ24iLCJnZXREZWxpdmVyeURhdGUiLCJ0b2RheURhdGUiLCJEYXRlIiwic2V0RGF0ZSIsImdldERhdGUiLCJkZWxpdmVyeURhdGUiLCJ0b0lTT1N0cmluZyIsInNsaWNlIiwiYWRkT3JkZXIiLCJhZGROZXdPcmRlciIsInRoZW4iLCJyZXNwIiwic3RhdHVzIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxRQUFRQyxNQUFSLENBQWUsa0JBQWYsRUFBbUMsRUFBbkMsRUFHQ0MsVUFIRCxDQUdZLG9CQUhaLEVBR2tDLFVBQVVDLE1BQVYsRUFBa0JDLFNBQWxCLEVBQTZCQyxLQUE3QixFQUFvQ0MsSUFBcEMsRUFBMENDLFlBQTFDLEVBQXdEOztBQUV6RkosUUFBT0ssS0FBUCxHQUFlLEVBQWY7O0FBRUEsS0FBRyxDQUFDRCxhQUFhRSxRQUFiLEdBQXdCQyxNQUE1QixFQUFtQztBQUNsQ0MsUUFBTSx3Q0FBTjtBQUNBUCxZQUFVUSxJQUFWLENBQWUsR0FBZjtBQUNBLEVBSEQsTUFHTztBQUNOQyxTQUFPQyxNQUFQLENBQWNYLE9BQU9LLEtBQXJCLEVBQTRCRCxhQUFhRSxRQUFiLEVBQTVCO0FBQ0E7QUFDQTs7QUFFRCxLQUFJTSxrQkFBa0IsU0FBbEJBLGVBQWtCLEdBQVU7QUFDL0IsTUFBSUMsWUFBWSxJQUFJQyxJQUFKLEVBQWhCO0FBQ0FELFlBQVVFLE9BQVYsQ0FBa0JGLFVBQVVHLE9BQVYsS0FBc0IsQ0FBeEM7QUFDQSxTQUFPSCxTQUFQO0FBQ0EsRUFKRDs7QUFNQWIsUUFBT0ssS0FBUCxDQUFhWSxZQUFiLEdBQTRCTCxrQkFBa0JNLFdBQWxCLEdBQWdDQyxLQUFoQyxDQUFzQyxDQUF0QyxFQUF3QyxFQUF4QyxDQUE1Qjs7QUFFQW5CLFFBQU9vQixRQUFQLEdBQWtCLFlBQVU7QUFDM0JsQixRQUFNbUIsV0FBTixDQUFrQnJCLE9BQU9LLEtBQXpCLEVBQWdDaUIsSUFBaEMsQ0FBcUMsVUFBU0MsSUFBVCxFQUFjO0FBQ2xELE9BQUdBLEtBQUtDLE1BQUwsS0FBZ0IsR0FBbkIsRUFBd0I7QUFDdkJoQixVQUFNLGdDQUFOO0FBQ0EsSUFGRCxNQUVPO0FBQ05BLFVBQU0sdUNBQU47QUFDQVAsY0FBVVEsSUFBVixDQUFlLEdBQWY7QUFDQTtBQUNELEdBUEQ7QUFRQSxFQVREO0FBV0EsQ0FsQ0QiLCJmaWxlIjoib3JkZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnb3RibzVseS5uZXdPcmRlcicsIFtdKVxyXG5cclxuXHJcbi5jb250cm9sbGVyKCdOZXdPcmRlckNvbnRyb2xsZXInLCBmdW5jdGlvbiAoJHNjb3BlLCAkbG9jYXRpb24sIFVzZXJzLCBBdXRoLCBPcmRlclNlcnZpY2UpIHtcclxuXHRcclxuXHQkc2NvcGUub3JkZXIgPSB7fTtcclxuXHJcblx0aWYoIU9yZGVyU2VydmljZS5nZXRPcmRlcigpLnVzZXJJRCl7XHJcblx0XHRhbGVydCgneW91IHNob3VsZCBjaG9vc2Ugd2hhdCB0byBvcmRlciBmaXJzdCEnKTtcclxuXHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XHJcblx0fSBlbHNlIHtcclxuXHRcdE9iamVjdC5hc3NpZ24oJHNjb3BlLm9yZGVyLCBPcmRlclNlcnZpY2UuZ2V0T3JkZXIoKSk7XHJcblx0XHQvL2NvbnNvbGUubG9nKFwib3JkZXIgY29taW5nIGZyb20gbWFpbiAtLS0tIFwiLCAkc2NvcGUub3JkZXIpO1xyXG5cdH1cclxuXHJcblx0dmFyIGdldERlbGl2ZXJ5RGF0ZSA9IGZ1bmN0aW9uKCl7XHJcblx0XHR2YXIgdG9kYXlEYXRlID0gbmV3IERhdGUoKTtcclxuXHRcdHRvZGF5RGF0ZS5zZXREYXRlKHRvZGF5RGF0ZS5nZXREYXRlKCkgKyAxKTtcclxuXHRcdHJldHVybiB0b2RheURhdGU7XHJcblx0fVxyXG5cclxuXHQkc2NvcGUub3JkZXIuZGVsaXZlcnlEYXRlID0gZ2V0RGVsaXZlcnlEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKTtcclxuXHJcblx0JHNjb3BlLmFkZE9yZGVyID0gZnVuY3Rpb24oKXtcclxuXHRcdFVzZXJzLmFkZE5ld09yZGVyKCRzY29wZS5vcmRlcikudGhlbihmdW5jdGlvbihyZXNwKXtcclxuXHRcdFx0aWYocmVzcC5zdGF0dXMgPT09IDUwMCkge1xyXG5cdFx0XHRcdGFsZXJ0KCdTb21ldGhpbmcgd2VudCB3cm9uZyB0cnkgYWdhaW4nKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRhbGVydCgneW91ciBvcmRlciBoYXMgYmVlbiBzZW50IHN1Y2Nlc3NmdWxseScpXHJcblx0XHRcdFx0JGxvY2F0aW9uLnBhdGgoJy8nKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHR9XHJcblx0XHJcbn0pO1xyXG4iXX0=